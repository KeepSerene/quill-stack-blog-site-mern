/**
 * @copyright 2025 Dhrubajyoti Bhattacharjee
 * @license Apache-2.0
 */

/* Geist font imports */
@import url("https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Geist:wght@100..900&display=swap");

/* Tailwind imports */
@import "tailwindcss";
@import "tw-animate-css";

/* Custom dark variant definition */
/* 
 - Apply this style to the current element (&) when it is ANY element (*) 
 - that is a descendant of something with the ".dark" class
*/
@custom-variant dark (&:is(.dark *));

:root {
  /* Colors - Ghibli's inspired */
  --background: hsl(45 25% 96%);
  --foreground: hsl(25 15% 25%);
  --card: hsl(40 30% 98%);
  --card-foreground: hsl(25 15% 25%);
  --popover: hsl(40 35% 99%);
  --popover-foreground: hsl(25 15% 25%);
  --primary: hsl(145 30% 45%);
  --primary-foreground: hsl(0 0% 100%);
  --secondary: hsl(20 40% 88%);
  --secondary-foreground: hsl(25 20% 30%);
  --muted: hsl(40 20% 92%);
  --muted-foreground: hsl(25 8% 45%);
  --accent: hsl(145 25% 90%);
  --accent-foreground: hsl(145 30% 30%);
  --destructive: hsl(0 55% 60%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(40 15% 85%);
  --input: hsl(40 15% 80%);
  --ring: hsl(145 30% 45%);

  /* Chart colors */
  --chart-1: hsl(145 30% 45%);
  --chart-2: hsl(35 45% 65%);
  --chart-3: hsl(200 30% 60%);
  --chart-4: hsl(20 40% 70%);
  --chart-5: hsl(85 25% 50%);

  /* Sidebar colors */
  --sidebar: hsl(42 22% 95%);
  --sidebar-foreground: hsl(25 12% 35%);
  --sidebar-primary: hsl(145 28% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(40 25% 90%);
  --sidebar-accent-foreground: hsl(25 15% 30%);
  --sidebar-border: hsl(40 12% 88%);
  --sidebar-ring: hsl(145 25% 50%);

  /* Typography - Geist fonts */
  --font-sans: "Geist", ui-sans-serif, sans-serif, system-ui;
  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-mono: "Geist Mono", ui-monospace, SFMono-Regular, Menlo, Monaco,
    Consolas, "Liberation Mono", "Courier New", monospace;

  /* Radius */
  --radius: 0.5rem;

  /* Shadows */
  --shadow-2xs: 0 1px 2px 0px hsl(25 15% 15% / 0.03);
  --shadow-xs: 0 1px 2px 0px hsl(25 15% 15% / 0.04);
  --shadow-sm: 0 1px 3px 0px hsl(25 15% 15% / 0.06),
    0 1px 2px -1px hsl(25 15% 15% / 0.04);
  --shadow: 0 2px 4px 0px hsl(25 15% 15% / 0.05),
    0 1px 2px -1px hsl(25 15% 15% / 0.04);
  --shadow-md: 0 4px 6px -1px hsl(25 15% 15% / 0.06),
    0 2px 4px -2px hsl(25 15% 15% / 0.04);
  --shadow-lg: 0 10px 15px -3px hsl(25 15% 15% / 0.06),
    0 4px 6px -4px hsl(25 15% 15% / 0.04);
  --shadow-xl: 0 20px 25px -5px hsl(25 15% 15% / 0.06),
    0 8px 10px -6px hsl(25 15% 15% / 0.04);
  --shadow-2xl: 0 25px 50px -12px hsl(25 15% 15% / 0.15);

  /* Spacings */
  --tracking-normal: 0.01em;
  --spacing: 0.25rem;
}

.dark {
  /* Colors - Ghibli inspired */
  --background: hsl(220 15% 12%);
  --foreground: hsl(40 20% 90%);
  --card: hsl(220 14% 15%);
  --card-foreground: hsl(40 20% 90%);
  --popover: hsl(220 15% 13%);
  --popover-foreground: hsl(40 20% 90%);
  --primary: hsl(145 35% 55%);
  --primary-foreground: hsl(220 15% 10%);
  --secondary: hsl(25 20% 22%);
  --secondary-foreground: hsl(40 25% 85%);
  --muted: hsl(220 12% 18%);
  --muted-foreground: hsl(40 10% 60%);
  --accent: hsl(145 20% 25%);
  --accent-foreground: hsl(145 35% 75%);
  --destructive: hsl(0 60% 55%);
  --destructive-foreground: hsl(0 0% 100%);
  --border: hsl(220 12% 22%);
  --input: hsl(220 12% 25%);
  --ring: hsl(145 35% 55%);

  /* Chart colors */
  --chart-1: hsl(145 35% 55%);
  --chart-2: hsl(35 50% 60%);
  --chart-3: hsl(200 35% 55%);
  --chart-4: hsl(20 45% 60%);
  --chart-5: hsl(85 30% 50%);

  /* Sidebar colors */
  --sidebar: hsl(220 16% 14%);
  --sidebar-foreground: hsl(40 15% 75%);
  --sidebar-primary: hsl(145 32% 52%);
  --sidebar-primary-foreground: hsl(220 15% 10%);
  --sidebar-accent: hsl(220 12% 20%);
  --sidebar-accent-foreground: hsl(40 20% 80%);
  --sidebar-border: hsl(220 12% 20%);
  --sidebar-ring: hsl(145 30% 50%);

  /* Radius */
  --radius: 0.5rem;

  /* Shadows  */
  --shadow-2xs: 0 1px 2px 0px hsl(0 0% 0% / 0.15);
  --shadow-xs: 0 1px 2px 0px hsl(0 0% 0% / 0.2);
  --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.25),
    0 1px 2px -1px hsl(0 0% 0% / 0.2);
  --shadow: 0 2px 4px 0px hsl(0 0% 0% / 0.2), 0 1px 2px -1px hsl(0 0% 0% / 0.15);
  --shadow-md: 0 4px 6px -1px hsl(0 0% 0% / 0.25),
    0 2px 4px -2px hsl(0 0% 0% / 0.2);
  --shadow-lg: 0 10px 15px -3px hsl(0 0% 0% / 0.3),
    0 4px 6px -4px hsl(0 0% 0% / 0.2);
  --shadow-xl: 0 20px 25px -5px hsl(0 0% 0% / 0.35),
    0 8px 10px -6px hsl(0 0% 0% / 0.25);
  --shadow-2xl: 0 25px 50px -12px hsl(0 0% 0% / 0.5);
}

@theme inline {
  /* Colors - Ghibli inspired */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Chart colors */
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Sidebar colors */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Typography */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --font-serif: var(--font-serif);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Shadows */
  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);

  /* Spacings */
  --tracking-normal: var(--tracking-normal);
  --tracking-tighter: calc(var(--tracking-normal) - 0.05em);
  --tracking-tight: calc(var(--tracking-normal) - 0.025em);
  --tracking-wide: calc(var(--tracking-normal) + 0.025em);
  --tracking-wider: calc(var(--tracking-normal) + 0.05em);
  --tracking-widest: calc(var(--tracking-normal) + 0.1em);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background font-sans text-foreground tracking-normal antialiased;
    @apply caret-primary selection:bg-primary/20;
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary) / 0.3) transparent;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    @apply cursor-pointer;
  }

  button:disabled,
  [role="button"]:disabled {
    @apply cursor-not-allowed;
  }

  &::-webkit-scrollbar {
    @apply w-1 h-1;
  }

  &::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  &::-webkit-scrollbar-thumb {
    @apply bg-primary/30 rounded-full transition-colors hover:bg-primary/40;
  }
}

@layer components {
  /* Navlink active styles */
  .nav-link.active {
    @apply bg-accent text-accent-foreground;
  }

  /* Tiptap editor styles */
  .tiptap {
    @apply grow outline-none;

    /* Headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      @apply font-semibold tracking-tight text-foreground;
      scroll-margin-top: 5rem;

      &:not(:first-child) {
        @apply mt-8 lg:mt-10;
      }
    }

    h1 {
      @apply text-3xl sm:text-4xl lg:text-5xl pb-2 first:mt-0;
      line-height: 1.2;
    }

    h2 {
      @apply text-2xl sm:text-3xl lg:text-4xl;
      line-height: 1.25;
    }

    h3 {
      @apply text-xl sm:text-2xl lg:text-3xl;
      line-height: 1.3;
    }

    h4 {
      @apply text-lg sm:text-xl lg:text-2xl;
      line-height: 1.35;
    }

    h5 {
      @apply text-base sm:text-lg lg:text-xl;
      line-height: 1.4;
    }

    h6 {
      @apply text-sm sm:text-base lg:text-lg;
      line-height: 1.45;
    }

    /* Paragraphs */
    p {
      @apply leading-relaxed text-foreground/90;

      &:not(:first-child) {
        @apply mt-4 lg:mt-6;
      }
    }

    /* Links */
    a {
      @apply text-primary underline decoration-primary/30 underline-offset-2 
             transition-colors hover:decoration-primary/60 hover:text-primary/90;
    }

    /* Blockquotes with gentle styling */
    blockquote {
      @apply mt-6 border-l-4 border-primary/30 pl-4 sm:pl-6 
             italic text-muted-foreground bg-accent/30 py-2 rounded-r-lg;
    }

    /* Horizontal rules */
    hr {
      @apply my-8 border-border/60;
    }

    /* Lists */
    ul,
    ol {
      @apply my-6 ml-6 space-y-2;

      li {
        @apply leading-relaxed pl-2;

        p {
          @apply mt-2 first:mt-0;
        }
      }
    }

    ul {
      @apply list-disc marker:text-primary/60;
    }

    ol {
      @apply list-decimal marker:text-primary/60 marker:font-medium;
    }

    /* Nested lists */
    ul ul,
    ol ol,
    ul ol,
    ol ul {
      @apply my-2 ml-4;
    }

    /* Code blocks and inline code */
    code {
      @apply bg-muted/60 relative rounded-md px-[0.4rem] py-1 
             font-mono text-[0.9em] border border-border/40
             text-foreground/90;
      font-feature-settings: "liga" 0;
    }

    pre {
      @apply my-6 overflow-x-auto rounded-lg bg-muted/40 p-4 
             border border-border/50 shadow-sm;

      code {
        @apply bg-transparent border-0 p-0 text-sm leading-relaxed;
        display: block;
      }
    }

    /* Tables */
    table {
      @apply w-full my-6 border-collapse text-sm;

      thead {
        @apply border-b-2 border-border;

        th {
          @apply text-left font-semibold p-2 sm:p-3 text-foreground;
        }
      }

      tbody {
        tr {
          @apply border-b border-border/50 transition-colors hover:bg-muted/30;

          &:last-child {
            @apply border-0;
          }
        }

        td {
          @apply p-2 sm:p-3;
        }
      }
    }

    /* Images */
    img {
      @apply rounded-lg my-6 shadow-md max-w-full h-auto;
    }

    /* Strong and emphasis */
    strong {
      @apply font-semibold text-foreground;
    }

    em {
      @apply italic;
    }

    /* Placeholder text */
    .is-editor-empty:first-child {
      @apply before:text-muted-foreground/60 before:content-[attr(data-placeholder)] 
             before:float-left before:h-0 before:pointer-events-none;
    }

    /* Task lists */
    ul[data-type="taskList"] {
      @apply list-none ml-0;

      li {
        @apply flex items-start gap-2;

        label {
          @apply flex items-center gap-2 cursor-pointer select-none;

          input[type="checkbox"] {
            @apply rounded border-2 border-primary/40 
                   checked:bg-primary checked:border-primary
                   focus:ring-2 focus:ring-primary/20 focus:ring-offset-0
                   transition-colors cursor-pointer;
          }
        }
      }
    }
  }

  /* Custom scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary) / 0.3) transparent;

    &::-webkit-scrollbar {
      @apply w-1 h-1;
    }

    &::-webkit-scrollbar-track {
      @apply bg-transparent;
    }

    &::-webkit-scrollbar-thumb {
      @apply bg-primary/30 rounded-full transition-colors hover:bg-primary/40;
    }
  }
}

@layer utilities {
  .container {
    @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
  }

  .section {
    @apply py-8 sm:py-12 md:py-16 lg:py-20;
  }

  .section-title {
    @apply text-2xl sm:text-3xl md:text-4xl font-semibold mb-4 md:mb-6 lg:mb-8 
           tracking-tight text-foreground;
  }

  /* Prose container for blog content */
  .prose {
    @apply max-w-none sm:max-w-2xl lg:max-w-4xl mx-auto;
  }

  /* Smooth focus visible styles */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 
           focus-visible:ring-ring focus-visible:ring-offset-2 
           focus-visible:ring-offset-background transition-shadow;
  }
}
